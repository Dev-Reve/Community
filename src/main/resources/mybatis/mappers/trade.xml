<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <!-- DAO에서 아래 mapper태그 내부에 접근하기 위해 mapper태그에 namespace를 설정 -->
  <!-- DAO에서 member관련 sql문을 작성 또는 호출을 위해서는 mapper.member를 호출하여야 함 -->
<mapper namespace="mapper.trade">
	<!-- member관련 DB에서 조회해온 결과를 담을 Map을 생성하여 id값을 memResult로 저장 -->
	<!-- 이후 조회해온 resultMap에 VO들을 담기 위해서  resultMap에 memResult를 작성하거나
		 resultType에 memberVO를 작성하여 VO빈에 저장하면 됨  -->
	<resultMap id="tradeResult" type="tradeVO">
		<result property="no" column="no"/>
		<result property="readCount" column="readCount"/>
		<result property="price" column="price"/>
		<result property="sellStat" column="sellStat"/>
		<result property="title" column="title"/>
		<result property="content" column="content"/>
		<result property="nickname" column="nickname"/>
		<result property="writeDate" column="writeDate"/>
		<result property="category" column="category"/>
		<result property="fileName" column="fileName"/>
		<result property="fileRealName" column="fileRealName"/>
	</resultMap>
	
	<!-- member라는 테이블에 존재하는 모든 회원들을 조회해화 리스트에 저장하기 위해 위 resultMap에 설정해둔 id값 memResult를 호출하여
		 조회해온 모든 회원들의 정보를 memResult라는 List에 저장 -->
	<select id="selectAllTrades" resultMap="tradeResult">
		<![CDATA[
			select * from trade order by writeDate desc
		]]>		
	</select>
	
	<!-- member테이블에 저장된 name값을 불러오기 위해서는 저장할 결과데이터 타입(resultType)을 String으로 설정 -->
	<select id="selectName" resultType="String">
		<!-- where조건절 뒤에 불러올 변수 값을 넣기 위해서는 #{변수명}으로 작성해주어야 함 -->
		<![CDATA[
			select name from member where id = #{id}
		]]>
	</select>
	<!-- member테이블에 저장된 정수 age값을 불러오기 위해서 저장할 결과데이터 타입을 int로 설정 -->	
	<select id="selectAge" resultType="int">
		<![CDATA[
			select age from member where id = #{id}
		]]>
	</select>
	
	<!-- 회원정보를 등록하기 위해 받아온 매개변수 타입이 memberVO이기 때문에 아래의 parameterType속성 값으로
		  매개변수로 지정했던 memberVO값을 설정 -->
	<insert id="insertMember" parameterType="memberVO">
		<!-- memberVO에 저장된 변수명들을 작성하기 위해서는 #{VO에 저장된 변수명}으로 작성 -->
		<!-- update문이나 delete문도 동일하게 작성하면 됨 -->
		<![CDATA[
			insert into member(id, pwd, name, email)
			values (#{id}, #{pwd}, #{name}, #{email})
		]]>
	</insert>
	
	
</mapper>